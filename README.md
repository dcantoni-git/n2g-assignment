# n2g-assignment
Assignment for backend engineer position at net2grid.

# App Description
I built a REST API using Python Django and the Django REST Framework. I used Docker to containerize the application. I also used GitHub Actions and Workflows for automatic testing and linting. The unit tests were made with a mysql local database, because i didn't have permissions to create a test database on the net2grid host. When the developmnet was finished, I used the remote net2grid database that I wes given and did manual tests.

To run the application you need to run "docker-compose build" and "docker-compose up"

In order to demontrate some other features, such as token authentication, table relations, filtering and pagination, I created a "user" app. Because the API had no authentication, I thought it would be a good practice to add authentication and tracability for the messages. That means the application stores the id of the user who used the API and it offers the ability to retrieve the messages that were sent by each user. 

# Database Tables
The two data tables, one for the users and the other for the messages were created using the Django ORM. But of course they could have been created with SQL commands.

The message table has the following structure:

id             BIGINT          (primary key - auto generated)
gatewayEui     VARCHAR
profileId      VARCHAR
endpointId     VARCHAR
clusterId      VARCHAR
attributeId    VARCHAR
value          INT
timestamp      BIGINT
user_id        BIGINT            (foreign key)


The user table has the follwing structure:

id             BIGINT          (primary key - auto generated)
email          VARCHAR          Unique
username       VARCHAR
password       VARCHAR
last_login     DATETIME
is_active      TINYINT
is_staff       TINYINT
is_superuser   TINYINT

# API endpoints
The API endpoints were automatically documented using swaggerUI and the can be found in the url 127.0.0.1/api/docs

(POST) /api/user/create/                                   --> Create user with email, username and password 
(POST) /api/user/token/                                    --> Create authentication token, based on the credentials  
(POST, PUT, PATCH) /api/user/myprofile                     --> For editting the user profile  

(GET) /api/message/send-to-exchange/{number_of_messages}   -->  Call the external API {number_of_messages} and send each message to the RabbitMQ EXchange  
(GET) /api/message/store-to-database/{number_of_messages}  -->  Consume up to {number_of_messages} form the result queue and store them to MySQL database
(GET) /api/message/store-to-database-continuous/           -->  Creates a continuous listening to the results queue and stores data to MySQL database
                                                               (FOR DEMONSTRATION REASONS, NOT RECOMMENTED. IT SHOULD BE TERMINATED MANUALLY)
(GET) /api/message/show-stored-messages/                   -->  Shows the stored messages that were generated by the user in pagination format 





